<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- ENGAGE_ANSWER_DETAILS -->
<mapper namespace="com.hr.mapper.EngageAnswerDetailsMapper">
    <!-- This code was generated by TableGo tools, mark 1 begin. -->
    <!-- 字段映射 -->
    <resultMap id="engageAnswerDetailsMap" type="EngageAnswerDetails">
        <id column="AND_ID" property="andId" jdbcType="VARCHAR" />
        <result column="ANSWER_NUMBER" property="answerNumber" jdbcType="VARCHAR" />
        <result column="SUBJECT_ID" property="subjectId" jdbcType="VARCHAR" />
        <result column="ANSWER" property="answer" jdbcType="VARCHAR" />
    </resultMap>
    
    
    <resultMap id="engageAnswerDetailAndEngageSubjects" type="com.hr.dto.EngageAnswerDetailAndEngageSubjects">
        <id column="AND_ID" property="andId" jdbcType="VARCHAR" />
        <result column="ANSWER_NUMBER" property="answerNumber" jdbcType="VARCHAR" />
        <result column="SUBJECT_ID" property="subjectId" jdbcType="VARCHAR" />
        <result column="ANSWER" property="answer" jdbcType="VARCHAR" />
        <result column="SUB_ID" property="subId" jdbcType="VARCHAR" />
        <result column="FIRST_KIND_ID" property="firstKindId" jdbcType="VARCHAR" />
        <result column="FIRST_KIND_NAME" property="firstKindName" jdbcType="VARCHAR" />
        <result column="SECOND_KIND_ID" property="secondKindId" jdbcType="VARCHAR" />
        <result column="SECOND_KIND_NAME" property="secondKindName" jdbcType="VARCHAR" />
        <result column="REGISTER" property="register" jdbcType="VARCHAR" />
        <result column="REGIST_TIME" property="registTime" jdbcType="TIMESTAMP" />
        <result column="DERIVATION" property="derivation" jdbcType="VARCHAR" />
        <result column="CONTENT" property="content" jdbcType="VARCHAR" />
        <result column="KEY_A" property="keyA" jdbcType="VARCHAR" />
        <result column="KEY_B" property="keyB" jdbcType="VARCHAR" />
        <result column="KEY_C" property="keyC" jdbcType="VARCHAR" />
        <result column="KEY_D" property="keyD" jdbcType="VARCHAR" />
        <result column="KEY_E" property="keyE" jdbcType="VARCHAR" />
        <result column="CORRECT_KEY" property="correctKey" jdbcType="VARCHAR" />
        <result column="CHANGER" property="changer" jdbcType="VARCHAR" />
        <result column="CHANGE_TIME" property="changeTime" jdbcType="TIMESTAMP" />
    </resultMap>
    <!-- This code was generated by TableGo tools, mark 1 end. -->
    
    <!-- This code was generated by TableGo tools, mark 2 begin. -->
    <!-- 表所有字段 -->
    <sql id="allColumns">
        AND_ID, ANSWER_NUMBER, SUBJECT_ID, ANSWER
    </sql>
    <!-- This code was generated by TableGo tools, mark 2 end. -->
    
    <!-- 查询所有数据 -->
    <select id="findEngageAnswerDetailsAll" resultMap="engageAnswerDetailsMap">
        SELECT
        <include refid="allColumns" />
        FROM ENGAGE_ANSWER_DETAILS
    </select>
    
    <!-- 查询所有数据 -->
    <select id="findengageAnswerDetailAndEngageSubjectsByanswerNumber" resultMap="engageAnswerDetailAndEngageSubjects" parameterType="String">
        SELECT * 
		FROM engage_answer_details a,engage_subjects b
		WHERE a.answer_number = #{answerNumber} 
		AND a.`subject_id`=b.`sub_id`
    </select>
    
    <!-- 根据主键查询数据 -->
    <select id="findEngageAnswerDetailsByIds" resultMap="engageAnswerDetailsMap" parameterType="list">
        SELECT
        <include refid="allColumns" />
        FROM ENGAGE_ANSWER_DETAILS WHERE AND_ID IN
        <foreach collection="list" index="index" item="andId" open="(" separator="," close=")">
            #{andId}
        </foreach>
    </select>
    
    <!-- 插入数据 -->
    <insert id="insertEngageAnswerDetails" parameterType="map">
        INSERT INTO ENGAGE_ANSWER_DETAILS (
            AND_ID, ANSWER_NUMBER, SUBJECT_ID, ANSWER
        ) VALUES (
            #{andId},
            #{answerNumber},
            #{subjectId},
            #{answer}
        )
    </insert>
    
    <!-- 修改数据 -->
    <update id="updateEngageAnswerDetails" parameterType="map">
        UPDATE ENGAGE_ANSWER_DETAILS
        <set>
            <if test="answerNumber != null">
                ANSWER_NUMBER = #{answerNumber},
            </if>
            <if test="subjectId != null">
                SUBJECT_ID = #{subjectId},
            </if>
            <if test="answer != null">
                ANSWER = #{answer}
            </if>
        </set>
        WHERE AND_ID = #{andId}
    </update>
    
    <update id="updateEngageAnswerDetailsBysubjectIdAndanswerNumber" parameterType="map">
        UPDATE ENGAGE_ANSWER_DETAILS
        <set>
            <if test="answer != null">
                ANSWER = #{answer}
            </if>
        </set>
        WHERE SUBJECT_ID = #{subjectId} and ANSWER_NUMBER = #{answerNumber}
    </update>
    
    <!-- 根据主键删除数据 -->
    <delete id="deleteEngageAnswerDetailsById" parameterType="string">
        DELETE FROM ENGAGE_ANSWER_DETAILS WHERE AND_ID = #{andId}
    </delete>
    
</mapper>